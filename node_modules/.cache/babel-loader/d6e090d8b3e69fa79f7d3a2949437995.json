{"ast":null,"code":"import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"../collector.service\";\nimport * as i4 from \"../../musician/musician.service\";\nimport * as i5 from \"@angular/common\";\nvar I18N_0;\n\nif (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n  const MSG_EXTERNAL_7138766779874831722$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_1 = goog.getMsg(\"Musician*\");\n  I18N_0 = MSG_EXTERNAL_7138766779874831722$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_1;\n} else {\n  I18N_0 = \"M\\xFAsico*\";\n}\n\nvar I18N_2;\n\nif (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n  const MSG_EXTERNAL_8650697070082525512$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_3 = goog.getMsg(\"Select a musician\");\n  I18N_2 = MSG_EXTERNAL_8650697070082525512$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_3;\n} else {\n  I18N_2 = \"Selecione un m\\xFAsico\";\n}\n\nvar I18N_4;\n\nif (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n  const MSG_EXTERNAL_697240665115955958$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_5 = goog.getMsg(\"* Required field\");\n  I18N_4 = MSG_EXTERNAL_697240665115955958$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_5;\n} else {\n  I18N_4 = \"* Campo requerido\";\n}\n\nvar I18N_6;\n\nif (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n  const MSG_EXTERNAL_2159130950882492111$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_7 = goog.getMsg(\"Cancel\");\n  I18N_6 = MSG_EXTERNAL_2159130950882492111$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_7;\n} else {\n  I18N_6 = \"Cancelar\";\n}\n\nvar I18N_8;\n\nif (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n  const MSG_EXTERNAL_5674286808255988565$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_9 = goog.getMsg(\"Create\");\n  I18N_8 = MSG_EXTERNAL_5674286808255988565$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS_9;\n} else {\n  I18N_8 = \"Crear\";\n}\n\nfunction FavoriteMusicianCreatorComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const musician_r2 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", musician_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(musician_r2.name);\n  }\n}\n\nvar I18N_10;\n\nif (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n  const MSG_EXTERNAL_78854020274018197$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS__11 = goog.getMsg(\" Musician required \");\n  I18N_10 = MSG_EXTERNAL_78854020274018197$$SRC_APP_COLLECTOR_FAVORITE_MUSICIAN_CREATOR_FAVORITE_MUSICIAN_CREATOR_COMPONENT_TS__11;\n} else {\n  I18N_10 = \"M\\xFAsico requerido\";\n}\n\nfunction FavoriteMusicianCreatorComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵi18n(1, I18N_10);\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class FavoriteMusicianCreatorComponent {\n  constructor(formBuilder, toastr, collectorService, musicianService) {\n    this.formBuilder = formBuilder;\n    this.toastr = toastr;\n    this.collectorService = collectorService;\n    this.musicianService = musicianService;\n    this.returnEvent = new EventEmitter();\n  }\n\n  getMusicians() {\n    this.musicianService.getMusicians().subscribe(musicians => {\n      this.musicians = musicians;\n    });\n  }\n\n  ngOnInit() {\n    this.getMusicians();\n    this.favoriteMusicianForm = this.formBuilder.group({\n      musician_id: [\"\", Validators.required]\n    });\n  }\n\n  createFavoriteMusician(newFavoriteMusician) {\n    let selectedMusician = this.musicians.filter(m => m.id == newFavoriteMusician.musician_id);\n    let sameFavMusicians = [];\n\n    if (selectedMusician.length > 0) {\n      sameFavMusicians = this.collectorDetail.favoritePerformers.filter(m => m.name.match(selectedMusician[0].name));\n    }\n\n    if (sameFavMusicians.length > 0) {\n      this.toastr.error('', `Ya está seleccionado como favorito`, {\n        \"progressBar\": false,\n        timeOut: 2500\n      });\n    } else {\n      this.collectorService.addFavoriteMusician(this.collectorDetail.id, newFavoriteMusician.musician_id).subscribe(response => {\n        this.emitReturnEvent();\n      });\n      this.showSuccess(newFavoriteMusician);\n    }\n\n    this.favoriteMusicianForm.reset();\n  }\n\n  showSuccess(newFavoriteMusician) {\n    this.toastr.success('', `Se agregó un nuevo músico favorito`, {\n      \"progressBar\": false,\n      timeOut: 2500\n    });\n  }\n\n  cancelCreation() {\n    console.log(\"Cancelando ...\");\n    this.favoriteMusicianForm.reset();\n    this.emitReturnEvent();\n  }\n\n  emitReturnEvent() {\n    this.returnEvent.emit(false);\n  }\n\n}\n\nFavoriteMusicianCreatorComponent.ɵfac = function FavoriteMusicianCreatorComponent_Factory(t) {\n  return new (t || FavoriteMusicianCreatorComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.CollectorService), i0.ɵɵdirectiveInject(i4.MusicianService));\n};\n\nFavoriteMusicianCreatorComponent.ɵcmp = i0.ɵɵdefineComponent({\n  type: FavoriteMusicianCreatorComponent,\n  selectors: [[\"app-favorite-musician-creator\"]],\n  inputs: {\n    collectorDetail: \"collectorDetail\"\n  },\n  outputs: {\n    returnEvent: \"returnEvent\"\n  },\n  decls: 22,\n  vars: 4,\n  consts: [[1, \"container-fluid\"], [1, \"col\", \"p-3\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"musician_id\"], [\"id\", \"musician_id\", \"formControlName\", \"musician_id\", \"aria-label\", \".form-select-sm example\", 1, \"form-select\"], [\"value\", \"\", \"selected\", \"\", \"disabled\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"alert alert-danger alert-dismissible fade show\", 4, \"ngIf\"], [1, \"form-group\", \"small\"], [2, \"float\", \"right\"], [\"id\", \"create-fav-musician\", \"type\", \"button\", 1, \"btn\", \"btn-danger\", \"ml-3\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [3, \"value\"], [1, \"alert\", \"alert-danger\", \"alert-dismissible\", \"fade\", \"show\"]],\n  template: function FavoriteMusicianCreatorComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"form\", 2);\n      i0.ɵɵlistener(\"ngSubmit\", function FavoriteMusicianCreatorComponent_Template_form_ngSubmit_2_listener() {\n        return !ctx.favoriteMusicianForm.invalid && ctx.createFavoriteMusician(ctx.favoriteMusicianForm.value);\n      });\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"label\", 4);\n      i0.ɵɵi18n(5, I18N_0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"select\", 5);\n      i0.ɵɵelementStart(7, \"option\", 6);\n      i0.ɵɵi18n(8, I18N_2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, FavoriteMusicianCreatorComponent_option_9_Template, 2, 2, \"option\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, FavoriteMusicianCreatorComponent_div_10_Template, 2, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 9);\n      i0.ɵɵelementStart(12, \"p\");\n      i0.ɵɵi18n(13, I18N_4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 10);\n      i0.ɵɵelementStart(15, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function FavoriteMusicianCreatorComponent_Template_button_click_15_listener() {\n        return ctx.cancelCreation();\n      });\n      i0.ɵɵi18n(16, I18N_6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\u00A0 \");\n      i0.ɵɵelementStart(18, \"button\", 12);\n      i0.ɵɵi18n(19, I18N_8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(20, \"br\");\n      i0.ɵɵelement(21, \"br\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.favoriteMusicianForm);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngForOf\", ctx.musicians);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.favoriteMusicianForm.get(\"musician_id\").hasError(\"required\") && ctx.favoriteMusicianForm.get(\"musician_id\").touched);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"disabled\", !ctx.favoriteMusicianForm.valid);\n    }\n  },\n  directives: [i1.ɵangular_packages_forms_forms_y, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.FormControlName, i1.NgSelectOption, i1.ɵangular_packages_forms_forms_x, i5.NgForOf, i5.NgIf],\n  encapsulation: 2\n});\n/*@__PURE__*/\n\n(function () {\n  i0.ɵsetClassMetadata(FavoriteMusicianCreatorComponent, [{\n    type: Component,\n    args: [{\n      selector: 'app-favorite-musician-creator',\n      templateUrl: './favorite-musician-creator.component.html'\n    }]\n  }], function () {\n    return [{\n      type: i1.FormBuilder\n    }, {\n      type: i2.ToastrService\n    }, {\n      type: i3.CollectorService\n    }, {\n      type: i4.MusicianService\n    }];\n  }, {\n    collectorDetail: [{\n      type: Input\n    }],\n    returnEvent: [{\n      type: Output\n    }]\n  });\n})();","map":{"version":3,"sources":["/home/ayrtonpc/AngularProjects/202112_Equipo_24/src/app/collector/favorite-musician-creator/favorite-musician-creator.component.ts","/home/ayrtonpc/AngularProjects/202112_Equipo_24/src/app/collector/favorite-musician-creator/favorite-musician-creator.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\nimport { ToastrService } from \"ngx-toastr\";\n\nimport { CollectorDetail } from '../collector-detail';\nimport { CollectorService } from '../collector.service';\nimport { Musician } from \"../../musician/musician\";\nimport { MusicianService } from '../../musician/musician.service';\n\n@Component({\n  selector: 'app-favorite-musician-creator',\n  templateUrl: './favorite-musician-creator.component.html'\n})\nexport class FavoriteMusicianCreatorComponent implements OnInit {\n  favoriteMusicianForm: FormGroup;\n  musicians: Musician[];\n  @Input() collectorDetail: CollectorDetail;\n  @Output() returnEvent = new EventEmitter<boolean>();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private toastr: ToastrService,\n    private collectorService: CollectorService,\n    private musicianService: MusicianService\n  ) { }\n\n  getMusicians(): void {\n    this.musicianService.getMusicians().subscribe((musicians) => {\n      this.musicians = musicians;\n    });\n  }\n\n  ngOnInit() {\n    this.getMusicians();\n\n    this.favoriteMusicianForm = this.formBuilder.group({\n      musician_id: [\"\", Validators.required]\n    });\n  }\n\n  createFavoriteMusician(newFavoriteMusician: any) {\n    let selectedMusician = this.musicians.filter(m => m.id == newFavoriteMusician.musician_id);\n    let sameFavMusicians = [];\n\n    if(selectedMusician.length > 0){\n      sameFavMusicians = this.collectorDetail.favoritePerformers.filter(m => m.name.match(selectedMusician[0].name));\n    }\n\n    if(sameFavMusicians.length > 0){\n      this.toastr.error('', `Ya está seleccionado como favorito`, { \"progressBar\": false, timeOut: 2500 });\n    }else{\n      this.collectorService.addFavoriteMusician(this.collectorDetail.id, newFavoriteMusician.musician_id)\n      .subscribe(response => {this.emitReturnEvent();});\n      this.showSuccess(newFavoriteMusician);\n    }\n\n    this.favoriteMusicianForm.reset();\n  }\n\n  showSuccess(newFavoriteMusician: Musician) {\n    this.toastr.success('', `Se agregó un nuevo músico favorito`, { \"progressBar\": false, timeOut: 2500 });\n  }\n\n  cancelCreation() {\n    console.log(\"Cancelando ...\");\n    this.favoriteMusicianForm.reset();\n    this.emitReturnEvent();\n  }\n\n  emitReturnEvent(){\n    this.returnEvent.emit(false);\n  }\n}\n","<div class=\"container-fluid\">\n  <div class=\"col p-3\">\n    <form [formGroup]=\"favoriteMusicianForm\" (ngSubmit)=\"!favoriteMusicianForm.invalid && createFavoriteMusician(favoriteMusicianForm.value)\">\n      <div class=\"form-group\">\n        <label for=\"musician_id\" i18n>Musician*</label>\n\n        <select id=\"musician_id\" class=\"form-select\" formControlName=\"musician_id\" aria-label=\".form-select-sm example\">\n          <option value=\"\" selected disabled i18n>Select a musician</option>\n          <option *ngFor=\"let musician of musicians\" value=\"{{musician.id}}\">{{musician.name}}</option>\n        </select>\n\n        <div class=\"alert alert-danger alert-dismissible fade show\" *ngIf=\"favoriteMusicianForm.get('musician_id').hasError('required') && favoriteMusicianForm.get('musician_id').touched\" i18n>\n          Musician required\n        </div>\n      </div>\n\n      <div class=\"form-group small\">\n        <p i18n>* Required field</p>\n      </div>\n\n      <div style=\"float: right;\">\n        <button id=\"create-fav-musician\" type=\"button\" class=\"btn btn-danger ml-3\" (click)=\"cancelCreation()\" i18n>Cancel</button>&nbsp;\n        <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"!favoriteMusicianForm.valid\" i18n>Create</button>\n      </div>\n      <br><br>\n    </form>\n  </div>\n</div>\n\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}